document.getElementById('chatColorsButton').addEventListener('click', function () {
    const colorPicker = document.createElement('input');
    colorPicker.type = 'color';
    colorPicker.style.display = 'none';
    document.body.appendChild(colorPicker);

    // Open the color picker
    colorPicker.click();

    // Wait for user to make a selection
    colorPicker.addEventListener('change', (e) => {
        const color = e.target.value; // Get the selected color
        const targetClass = confirm("Change ChatGPT's text color? Press Cancel to change User's text color.")
            ? '.chatgpt'
            : '.user';

        // Apply the selected color to the chosen elements
        document.querySelectorAll(targetClass).forEach(el => el.style.color = color);

        // Remove the color picker after use
        document.body.removeChild(colorPicker);
    });

    // Clean up if the color picker loses focus without a selection
    colorPicker.addEventListener('blur', () => {
        if (document.body.contains(colorPicker)) {
            document.body.removeChild(colorPicker);
        }
    });
});
